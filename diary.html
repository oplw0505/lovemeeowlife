<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>è²“å’ªè¯çµ¡ç°¿ï½œæ„›å–µæ£®</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      background: #fff7fb;
      color: #444;
    }
    .app {
      max-width: 520px;
      margin: 0 auto;
      padding: 16px 14px 32px;
    }
    header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 12px;
    }
    header .icon {
      font-size: 26px;
    }
    header h1 {
      margin: 0;
      font-size: 19px;
      color: #ff7aa5;
    }
    header p {
      margin: 2px 0 0;
      font-size: 12px;
      color: #888;
    }
    header a.back {
      font-size: 11px;
      color: #888;
      text-decoration: none;
    }
    .chip {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      margin-top: 4px;
      border-radius: 999px;
      background: #ffe3f0;
      font-size: 11px;
      color: #b1547c;
    }
    main {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    section {
      background: #ffffff;
      border-radius: 16px;
      padding: 14px 12px 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }
    section h2 {
      margin: 0 0 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #ff7aa5;
    }
    section h2 span.emoji {
      font-size: 18px;
    }
    .group-title {
      font-size: 12px;
      font-weight: 600;
      margin: 10px 0 4px;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    .field-row {
      display: flex;
      gap: 8px;
    }
    .field {
      margin-bottom: 8px;
      width: 100%;
    }
    label {
      display: block;
      font-size: 12px;
      margin-bottom: 3px;
      color: #666;
    }
    input, select, textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid #ffd1e3;
      padding: 8px 10px;
      font-size: 13px;
      outline: none;
      background: #fff;
    }
    input:focus, select:focus, textarea:focus {
      border-color: #ff7aa5;
      box-shadow: 0 0 0 2px rgba(255,122,165,0.13);
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .pill {
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 12px;
      border: 1px solid #ffd1e3;
      background: #fff;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .pill input[type="checkbox"] {
      accent-color: #ff7aa5;
      width: 13px;
      height: 13px;
    }
    .status-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
      margin-bottom: 4px;
    }
    .status-item {
      border-radius: 12px;
      padding: 6px 8px 7px;
      background: #fff7fc;
      border: 1px solid #ffe0f0;
    }
    .status-item label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3px;
      font-size: 12px;
    }
    .status-item label .emoji {
      font-size: 15px;
    }
    .status-item select {
      font-size: 12px;
      padding: 5px 8px;
    }
    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }
    .btn {
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: 9px 12px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }
    .btn-primary {
      background: #ff8fb5;
      color: #fff;
      box-shadow: 0 4px 10px rgba(255,143,181,0.4);
    }
    .btn-secondary {
      background: #fff;
      color: #ff8fb5;
      border: 1px solid #ffd1e3;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: none;
    }
    .preview-card {
      border-radius: 16px;
      background: linear-gradient(135deg, #fff7fb, #ffeef9);
      padding: 10px 10px 12px;
      border: 1px dashed #ffc5dd;
      font-size: 13px;
      line-height: 1.5;
      position: relative;
      overflow: hidden;
    }
    .preview-card::before {
      content: "for pawrent ğŸ’Œ";
      position: absolute;
      top: 6px;
      right: 10px;
      font-size: 10px;
      color: #d07a9e;
      opacity: 0.7;
    }
    .preview-header {
      display: flex;
      align-items: baseline;
      gap: 6px;
      margin-bottom: 4px;
    }
    .preview-header-name {
      font-size: 15px;
      font-weight: 700;
      color: #ff6c9e;
    }
    .preview-header-day {
      font-size: 11px;
      color: #888;
    }
    .preview-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 4px;
    }
    .tag {
      font-size: 11px;
      padding: 1px 6px;
      border-radius: 999px;
      background: #ffe3f0;
      color: #b1547c;
    }
    .preview-section-title {
      margin-top: 6px;
      font-size: 12px;
      font-weight: 600;
      color: #b1547c;
    }
    .preview-list {
      margin: 2px 0 0 0;
      padding-left: 18px;
    }
    .preview-list li {
      margin: 1px 0;
    }
    .hint {
      margin-top: 4px;
      font-size: 11px;
      color: #999;
    }
    .toast {
      position: fixed;
      bottom: 14px;
      left: 50%;
      transform: translateX(-50%);
      background: #444;
      color: #fff;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 12px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out, transform 0.2s ease-out;
      z-index: 999;
    }
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }
    @media (min-width: 520px) {
      .app {
        padding-top: 20px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <div class="icon">ğŸ“”</div>
    <div>
      <h1>è²“å’ªè¯çµ¡ç°¿</h1>
      <p>åˆ°åºœç•¶ä¸‹å¿«é€Ÿå¡«å¯«ï¼Œä¸€éµè¤‡è£½å‚³çµ¦é£¼ä¸» ğŸ’Œ</p>
      <span class="chip">æ„›å–µæ£®ï½œè²è²å§¨å§¨</span><br>
      <a class="back" href="index.html">â† å›é¦–é </a>
    </div>
  </header>

  <main>
    <!-- å¡«å¯«å€ -->
    <section>
      <h2><span class="emoji">ğŸ“‹</span> ä»Šæ—¥å¡«å¯«</h2>

      <div class="group-title">åŸºæœ¬è³‡æ–™</div>
      <form id="logForm">
        <div class="field-row">
          <div class="field">
            <label>æ—¥æœŸ</label>
            <input type="date" id="date">
          </div>
          <div class="field">
            <label>åˆ°åºœç¬¬å¹¾å¤©ï¼ˆé¸å¡«ï¼‰</label>
            <input type="number" id="dayCount" min="1" placeholder="ä¾‹å¦‚ï¼š1">
          </div>
        </div>

        <div class="field-row">
          <div class="field">
            <label>å–µå¤§å</label>
            <input type="text" id="catName" placeholder="ä¾‹å¦‚ï¼šè±†è±† / å°é­š">
          </div>
          <div class="field">
            <label>å¹´ç´€</label>
            <input type="text" id="catAge" placeholder="ä¾‹å¦‚ï¼š3æ­²">
          </div>
        </div>

        <div class="field-row">
          <div class="field">
            <label>æ€§åˆ¥</label>
            <select id="catGender">
              <option value="">æœªé¸æ“‡</option>
              <option value="å°ç‹å­">å…¬ï¼ˆç”·ç”Ÿï¼‰</option>
              <option value="å°å…¬ä¸»">æ¯ï¼ˆå¥³ç”Ÿï¼‰</option>
              <option value="å°å¤©ä½¿">ä¸ç¢ºå®š</option>
            </select>
          </div>
          <div class="field">
            <label>çµç´®</label>
            <select id="neuter">
              <option value="">æœªé¸æ“‡</option>
              <option value="å·²çµç´®">å·²çµç´®</option>
              <option value="æœªçµç´®">æœªçµç´®</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label>ç–«è‹— / é©…èŸ²ï¼ˆé¸å¡«ï¼‰</label>
          <input type="text" id="vaccine" placeholder="ä¾‹å¦‚ï¼šå·²å®ŒæˆåŸºç¤ç–«è‹—ã€æ¯3å€‹æœˆé©…èŸ²ä¸€æ¬¡">
        </div>

        <div class="field">
          <label>ç—…å² / é£Ÿç‰©éæ•ï¼ˆé¸å¡«ï¼‰</label>
          <textarea id="history" placeholder="ä¾‹å¦‚ï¼šè…è‡Ÿç¨å¼±ã€å°é›è‚‰éæ•"></textarea>
        </div>

        <div class="field">
          <label>å…¶ä»–ç‰¹æ®Šå‚™è¨»ï¼ˆé¸å¡«ï¼‰</label>
          <textarea id="specialNote" placeholder="ä¾‹å¦‚ï¼šæ€•å¤§è²éŸ³ã€æ€•å¹é¢¨æ©Ÿã€åªåƒç¢—å³é‚Šçš„ç½ç½"></textarea>
        </div>

        <div class="group-title">ä»Šå¤©å®Œæˆçš„äº‹é …</div>
        <div class="pill-row">
          <label class="pill"><input type="checkbox" value="å·²ä¾ç…§å®¶é•·èªªæ˜é¤µé£Ÿé¤é»" class="task">ğŸ½ï¸ é£Ÿç‰©</label>
          <label class="pill"><input type="checkbox" value="å·²è£œå……ä¹¾æ·¨çš„é£²ç”¨æ°´" class="task">ğŸ’§ æ°´</label>
          <label class="pill"><input type="checkbox" value="è²“ç ‚å·²æ¸…ç†ã€ç’°å¢ƒç¶­æŒä¹¾æ·¨" class="task">ğŸ§¹ è²“ç ‚</label>
          <label class="pill"><input type="checkbox" value="æœ‰é™ªç©ã€äº’å‹•ï¼Œå¹«åŠ©æ”¾é›»èˆ‡æ¸›å£“" class="task">ğŸ® é™ªç©</label>
          <label class="pill"><input type="checkbox" value="å·²å°‡è½ç ‚æ¸…ç†ä¹¾æ·¨" class="task">ğŸ§º è½ç ‚æ¸…æ½”</label>
          <label class="pill"><input type="checkbox" value="å®¶é›»ä¾ç…§å®¶é•·æŒ‡ç¤ºè™•ç†" class="task">ğŸ”Œ å®¶é›»</label>
          <label class="pill"><input type="checkbox" value="ç‡ˆå…‰ä¾ç…§å®¶é•·éœ€æ±‚èª¿æ•´" class="task">ğŸ’¡ ç‡ˆå…‰</label>
          <label class="pill"><input type="checkbox" value="å‡ºå…¥é–€çª—åŠæˆ¿é–€çš†æœ‰ç¢ºèª" class="task">ğŸšª é–€ / æˆ¿</label>
          <label class="pill"><input type="checkbox" value="çª—æˆ¶åŠç´—çª—å®‰å…¨å·²ç¢ºèª" class="task">ğŸªŸ çª—æˆ¶</label>
          <label class="pill"><input type="checkbox" value="é›¢é–‹å‰å†æ¬¡ç¢ºèªé–€é–å®‰å…¨" class="task">ğŸ” é–é–€</label>
          <label class="pill"><input type="checkbox" value="å¤–å‡ºç± æ“ºæ”¾ä½ç½®åŠç‹€æ…‹å·²ç¢ºèª" class="task">ğŸ§º å¤–å‡ºç± </label>
        </div>

        <div class="group-title">ä»Šæ—¥ã®å–µå–µ</div>
        <div class="status-row">
          <div class="status-item">
            <label>é£Ÿæ…¾ <span class="emoji">ğŸ½ï¸</span></label>
            <select id="eat">
              <option value="">æœªé¸æ“‡</option>
              <option value="é£Ÿæ…¾å¾ˆå¥½ï¼Œé¡˜æ„ä¸»å‹•é€²é£Ÿ">ğŸ˜‹ é£Ÿæ…¾å¾ˆå¥½</option>
              <option value="é£Ÿæ…¾æ™®é€šï¼Œåƒå¾—å·®ä¸å¤š">ğŸ™‚ é£Ÿæ…¾æ™®é€š</option>
              <option value="é£Ÿæ…¾ç¨å¾®åå·®ï¼Œéœ€è¦å†è§€å¯Ÿ">ğŸ˜ é£Ÿæ…¾ç¨å·®</option>
              <option value="å¹¾ä¹ä¸å¤ªæƒ³åƒï¼Œéœ€è¦ç‰¹åˆ¥ç•™æ„">ğŸ˜Ÿ å¹¾ä¹ä¸åƒ</option>
            </select>
          </div>
          <div class="status-item">
            <label>ç²¾ç¥ <span class="emoji">ğŸ˜º</span></label>
            <select id="spirit">
              <option value="">æœªé¸æ“‡</option>
              <option value="ç²¾ç¥å¾ˆå¥½ï¼Œé¡˜æ„äº’å‹•ã€ç©è€">âœ¨ ç²¾ç¥å¾ˆå¥½</option>
              <option value="ç²¾ç¥æ™®é€šï¼Œç¿’æ…£çš„ç¯€å¥">ğŸ™‚ ç²¾ç¥æ™®é€š</option>
              <option value="æœ‰é»ç´¯ã€æ¯”è¼ƒå®‰éœï¼Œéœ€è¦å†è§€å¯Ÿ">ğŸ˜´ ç¨å¾®æ²’ç²¾ç¥</option>
              <option value="æ˜é¡¯èé¡æˆ–èº²è—ï¼Œå»ºè­°å¤šæ³¨æ„">âš ï¸ ç²¾ç¥ä¸ä½³</option>
            </select>
          </div>
          <div class="status-item">
            <label>å¤§ä¾¿ <span class="emoji">ğŸ’©</span></label>
            <select id="poop">
              <option value="">æœªé¸æ“‡</option>
              <option value="ä»Šæ—¥æœ‰æ­£å¸¸æ’ä¾¿ï¼Œå½¢ç‹€èˆ‡é¡è‰²çœ‹èµ·ä¾†éƒ½ä¸éŒ¯">âœ… æ­£å¸¸</option>
              <option value="ä»Šæ—¥å°šæœªçœ‹åˆ°æ’ä¾¿ï¼ŒæœƒæŒçºŒå¹«å¿™ç•™æ„">ğŸ•’ å°šæœªçœ‹åˆ°</option>
              <option value="ä¾¿ä¾¿åè»Ÿæˆ–ç¨ç¡¬ï¼Œæœƒå†å¹«å¿™è§€å¯Ÿ">âš ï¸ ç¨æœ‰è®ŠåŒ–</option>
              <option value="ä¾¿ä¾¿æ˜é¡¯ç•°å¸¸ï¼ˆæ‹‰è‚šå­ / ä¾¿è¡€ç­‰ï¼‰ï¼Œå»ºè­°å¤šæ³¨æ„ç‹€æ³">ğŸš¨ æ˜é¡¯ç•°å¸¸</option>
            </select>
          </div>
          <div class="status-item">
            <label>å°¿å°¿ <span class="emoji">ğŸ’§</span></label>
            <select id="pee">
              <option value="">æœªé¸æ“‡</option>
              <option value="ä»Šæ—¥æœ‰æ­£å¸¸å°¿é‡ï¼Œé¡è‰²ä¹Ÿåœ¨åˆç†ç¯„åœ">âœ… æ­£å¸¸</option>
              <option value="ä»Šæ—¥å°šæœªçœ‹åˆ°å°¿å°¿ï¼Œæœƒç¹¼çºŒå¹«å¿™ç•™æ„">ğŸ•’ å°šæœªçœ‹åˆ°</option>
              <option value="å°¿é‡æˆ–é¡è‰²ç¨æœ‰è®ŠåŒ–ï¼Œæœƒå†è§€å¯Ÿç‹€æ³">âš ï¸ ç¨æœ‰è®ŠåŒ–</option>
              <option value="å°¿é‡æ˜é¡¯è®Šå°‘ / é »å°¿ / è¡€å°¿ç­‰ï¼Œå»ºè­°å¤šç•™æ„">ğŸš¨ æ˜é¡¯ç•°å¸¸</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label>ä»Šå¤©æœ‰æ²’æœ‰ç‰¹åˆ¥çš„äº‹æƒ…ã€ç•°å¸¸ç‹€æ³ï¼Ÿï¼ˆè‹¥ç„¡å¯ç•™ç©ºï¼‰</label>
          <textarea id="abnormal" placeholder="ä¾‹å¦‚ï¼šæœ‰ä¸€é»è»Ÿä¾¿ã€æ‰“å™´åš 2 æ¬¡ã€å°é™Œç”Ÿè²éŸ³æ¯”è¼ƒç·Šå¼µ"></textarea>
        </div>

        <div class="field">
          <label>ä¿å§†æƒ³è·Ÿçˆ¸åª½èªªçš„è©±ï¼ˆé¸å¡«ï¼‰</label>
          <textarea id="sitterNote" placeholder="ä¾‹å¦‚ï¼šä»Šå¤©å¾ˆä¹–ï¼Œæœ‰ä¸»å‹•ä¾†æ’’å¬Œï¼Œå·²å¹«å¿™å¤šé™ªç©ä¸€æœƒå…’ï½"></textarea>
        </div>

        <div class="btn-row">
          <button type="button" class="btn btn-secondary" id="resetBtn">æ¸…ç©ºä»Šæ—¥å…§å®¹</button>
          <button type="submit" class="btn btn-primary">æ›´æ–°é è¦½ ğŸ’Œ</button>
        </div>
      </form>
      <div class="hint">å…ˆæŒ‰ã€Œæ›´æ–°é è¦½ã€ï¼Œå†æŒ‰ã€Œè¤‡è£½æ–‡å­—ã€ï¼Œè²¼åˆ° LINE çµ¦å®¶é•·å³å¯ã€‚</div>
    </section>

    <!-- é è¦½çµ¦å®¶é•·çœ‹çš„ç•«é¢ -->
    <section>
      <h2><span class="emoji">ğŸ’Œ</span> çµ¦é£¼ä¸»çœ‹çš„æ–‡å­—é è¦½</h2>
      <article class="preview-card" id="previewCard">
        <div class="preview-header">
          <div class="preview-header-name" id="previewName">å–µå–µ</div>
          <div class="preview-header-day" id="previewDayText">ä»Šæ—¥åˆ°åºœæ—¥èªŒ</div>
        </div>
        <div class="preview-tags" id="previewTags">
          <span class="tag">å°è²“æ—¥èªŒ</span>
        </div>
        <div id="previewBody">
          ä»Šå¤©ä¿å§†åˆ°å®¶è£¡é™ªä¼´å–µå–µï¼Œå·²ä¾ç…§å®¶é•·çš„èªªæ˜å®Œæˆç…§é¡§é …ç›®ï¼Œè©³ç´°ç‹€æ³è«‹è¦‹ä¸‹æ–¹èªªæ˜ğŸ¾
        </div>
      </article>

      <div class="btn-row">
        <button type="button" class="btn btn-primary" id="copyBtn">è¤‡è£½é€™æ®µæ–‡å­— âœ‚ï¸</button>
      </div>
      <div class="hint">è²¼åˆ° LINE / IG / FB è¨Šæ¯ï¼Œå°±åƒæ˜¯å°ˆå±¬ã€Œåˆ°åºœå›å ±å¡ã€ã€‚</div>
    </section>
  </main>
</div>

<div class="toast" id="toast">å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼</div>

<script>
  const form = document.getElementById('logForm');
  const previewName = document.getElementById('previewName');
  const previewDayText = document.getElementById('previewDayText');
  const previewTags = document.getElementById('previewTags');
  const previewBody = document.getElementById('previewBody');
  const copyBtn = document.getElementById('copyBtn');
  const resetBtn = document.getElementById('resetBtn');
  const toast = document.getElementById('toast');

  function showToast(message) {
    toast.textContent = message;
    toast.classList.add('show');
    setTimeout(() => {
      toast.classList.remove('show');
    }, 1800);
  }

  function getValue(id) {
    const el = document.getElementById(id);
    return el ? el.value.trim() : "";
  }

  function buildPreview() {
    const date = getValue('date');
    const dayCount = getValue('dayCount');
    const catName = getValue('catName') || 'å–µå–µ';
    const catAge = getValue('catAge');
    const catGender = getValue('catGender');
    const neuter = getValue('neuter');
    const vaccine = getValue('vaccine');
    const history = getValue('history');
    const specialNote = getValue('specialNote');
    const abnormal = getValue('abnormal');
    const sitterNote = getValue('sitterNote');

    const eat = getValue('eat');
    const spirit = getValue('spirit');
    const poop = getValue('poop');
    const pee = getValue('pee');

    const tasks = Array.from(document.querySelectorAll('.task:checked')).map(t => t.value);

    // Header
    previewName.textContent = catName;
    let dayText = 'ä»Šæ—¥åˆ°åºœæ—¥èªŒ';
    if (date) {
      dayText = date.replace(/-/g, '/') + ' åˆ°åºœæ—¥èªŒ';
    }
    if (dayCount) {
      dayText += `ï½œç¬¬ ${dayCount} å¤©`;
    }
    previewDayText.textContent = dayText;

    // Tags
    previewTags.innerHTML = '';
    const tags = [];
    if (catAge) tags.push(catAge);
    if (catGender) tags.push(catGender);
    if (neuter) tags.push(neuter);
    if (!tags.length) tags.push('å°è²“æ—¥èªŒ');

    tags.forEach(t => {
      const span = document.createElement('span');
      span.className = 'tag';
      span.textContent = t;
      previewTags.appendChild(span);
    });

    // Body text
    let lines = [];

    // é–‹é ­
    lines.push(`ä»Šå¤©ä¿å§†æœ‰åˆ°å®¶è£¡é™ªä¼´ã€Œ${catName}ã€ï¼Œç›®å‰æ•´é«”ç‹€æ³å·²å¹«æ‚¨ç°¡å–®æ•´ç†å¦‚ä¸‹ï¼š`);

    // åŸºæœ¬è³‡æ–™ï¼ˆåªåœ¨æœ‰å¡«æ™‚å‡ºç¾ï¼‰
    const basicInfo = [];
    if (catAge) basicInfo.push(`å¹´ç´€ï¼š${catAge}`);
    if (vaccine) basicInfo.push(`ç–«è‹— / é©…èŸ²ï¼š${vaccine}`);
    if (history) basicInfo.push(`ç—…å² / éæ•ï¼š${history}`);
    if (specialNote) basicInfo.push(`ç‰¹åˆ¥å‚™è¨»ï¼š${specialNote}`);

    if (basicInfo.length) {
      lines.push('');
      lines.push('ğŸ“Œ åŸºæœ¬è³‡è¨Šå°æ•´ç†ï¼š');
      basicInfo.forEach(item => lines.push(`ãƒ»${item}`));
    }

    // ä»Šæ—¥å®Œæˆäº‹é …
    if (tasks.length) {
      lines.push('');
      lines.push('âœ… ä»Šå¤©å·²å®Œæˆçš„ç…§é¡§é …ç›®ï¼š');
      tasks.forEach(t => lines.push(`ãƒ»${t}`));
    }

    // ä»Šæ—¥ç‹€æ…‹
    const statusLines = [];
    if (eat) statusLines.push(`ğŸ½ï¸ é£Ÿæ…¾ï¼š${eat}`);
    if (spirit) statusLines.push(`ğŸ˜º ç²¾ç¥ï¼š${spirit}`);
    if (poop) statusLines.push(`ğŸ’© å¤§ä¾¿ï¼š${poop}`);
    if (pee) statusLines.push(`ğŸ’§ å°¿å°¿ï¼š${pee}`);

    if (statusLines.length) {
      lines.push('');
      lines.push('ğŸ¾ ä»Šæ—¥ã®å–µå–µï¼š');
      statusLines.forEach(item => lines.push(item));
    }

    // ç•°å¸¸ç‹€æ³
    if (abnormal) {
      lines.push('');
      lines.push('âš ï¸ ç‰¹åˆ¥ç•™æ„çš„å°åœ°æ–¹ï¼š');
      lines.push(abnormal);
    }

    // ä¿å§†ç•™è¨€
    if (sitterNote) {
      lines.push('');
      lines.push('ğŸ’Œ æƒ³è·Ÿçˆ¸åª½èªªï¼š');
      lines.push(sitterNote);
    }

    // çµå°¾
    lines.push('');
    lines.push('æœ‰ä»»ä½•æƒ³èª¿æ•´ç…§é¡§æ–¹å¼çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥éš¨æ™‚è·Ÿæˆ‘èªªï½');

    const html = lines
      .map(line => line ? line.replace(/\n/g, '<br>') : '<br>')
      .join('<br>');

    previewBody.innerHTML = html;

    return lines.join('\n');
  }

  form.addEventListener('input', buildPreview);

  form.addEventListener('submit', function (e) {
    e.preventDefault();
    buildPreview();
    showToast('å·²æ›´æ–°é è¦½ğŸ’Œ');
    document.getElementById('previewCard').scrollIntoView({ behavior: 'smooth', block: 'start' });
  });

  copyBtn.addEventListener('click', function () {
    const text = buildPreview();
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(text).then(() => {
        showToast('å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼Œå¯ä»¥è²¼åˆ° LINE å›‰ï¼');
      }).catch(() => {
        showToast('è¤‡è£½å¤±æ•—ï¼Œå¯ä»¥æ”¹ç”¨é•·æŒ‰é¸å–æ–‡å­—è¤‡è£½ã€‚');
      });
    } else {
      showToast('è£ç½®ä¸æ”¯æ´å¿«é€Ÿè¤‡è£½ï¼Œè«‹æ”¹ç”¨é•·æŒ‰é¸å–æ–‡å­—ã€‚');
    }
  });

  resetBtn.addEventListener('click', function () {
    form.reset();
    buildPreview();
    showToast('å·²æ¸…ç©ºä»Šæ—¥å…§å®¹');
  });

  // åˆå§‹åŒ–é è¦½
  buildPreview();
</script>
</body>
</html>
